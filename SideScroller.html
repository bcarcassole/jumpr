<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Side Scroller Jump Game</title>
<style>
    body {
        margin: 0;
        background: #222;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
        color: white;
    }

    canvas {
        background: linear-gradient(#87ceeb, #e0f6ff);
        border: 3px solid #fff;
    }
</style>
</head>
<body>

<canvas id="game" width="800" height="300"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const GROUND_Y = 240;
const GRAVITY = 0.7;
const JUMP_POWER = -12;
const SPEED = 6;

let gameOver = false;
let score = 0;

// Player
const player = {
    x: 80,
    y: GROUND_Y,
    width: 40,
    height: 40,
    velocityY: 0,
    jumping: false
};

// Obstacle (only one at a time)
let obstacle = null;

function spawnObstacle() {
    obstacle = {
        x: canvas.width + 40,
        y: GROUND_Y + 10,
        width: 30,
        height: 50,
        passed: false
    };
}

// Controls
document.addEventListener("keydown", e => {
    if (e.code === "Space") {
        if (!player.jumping && !gameOver) {
            player.velocityY = JUMP_POWER;
            player.jumping = true;
        }
        if (gameOver) resetGame();
    }
});

function resetGame() {
    score = 0;
    obstacle = null;
    gameOver = false;
    player.y = GROUND_Y;
    player.velocityY = 0;
}

// Physics & logic
function update() {
    if (gameOver) return;

    // Player gravity
    player.velocityY += GRAVITY;
    player.y += player.velocityY;

    // Ground collision
    if (player.y >= GROUND_Y) {
        player.y = GROUND_Y;
        player.velocityY = 0;
        player.jumping = false;
    }

    // Obstacle movement
    if (!obstacle) {
        spawnObstacle();
    } else {
        obstacle.x -= SPEED;

        // Score
        if (!obstacle.passed && obstacle.x + obstacle.width < player.x) {
            score++;
            obstacle.passed = true;
        }

        // Remove obstacle
        if (obstacle.x + obstacle.width < 0) {
            obstacle = null;
        }

        // Collision detection
        if (
            player.x < obstacle.x + obstacle.width &&
            player.x + player.width > obstacle.x &&
            player.y < obstacle.y + obstacle.height &&
            player.y + player.height > obstacle.y
        ) {
            gameOver = true;
        }
    }
}

// Drawing
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Ground
    ctx.fillStyle = "#444";
    ctx.fillRect(0, GROUND_Y + player.height, canvas.width, 50);

    // Player
    ctx.fillStyle = "#ffcc00";
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // Obstacle
    if (obstacle) {
        ctx.fillStyle = "#d9534f";
        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
    }

    // Score
    ctx.fillStyle = "#000";
    ctx.font = "18px Arial";
    ctx.fillText("Score: " + score, 10, 25);

    // Game over text
    if (gameOver) {
        ctx.fillStyle = "#000";
        ctx.font = "32px Arial";
        ctx.fillText("Game Over", 310, 130);
        ctx.font = "18px Arial";
        ctx.fillText("Press Space to Restart", 300, 165);
    }
}

// Game loop
function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>