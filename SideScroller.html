<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Side Scroller Jump Game</title>
<style>
    body {
        margin: 0;
        background: #222;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    canvas {
        background: linear-gradient(#87ceeb, #e0f6ff);
        border: 3px solid white;
    }
</style>
</head>
<body>

<canvas id="game" width="800" height="300"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Constants
const GROUND_Y = 220;
const GRAVITY = 0.9;
const JUMP_FORCE = -14;
const SPEED = 6;

// State
let gameOver = false;
let score = 0;

// Player
const player = {
    x: 100,
    y: GROUND_Y,
    w: 40,
    h: 40,
    vy: 0,
    onGround: true
};

// Obstacle definitions (all jumpable)
const obstacleTypes = [
    { w: 30, h: 50, color: "#d9534f" }, // normal
    { w: 30, h: 80, color: "#5bc0de" }, // tall
    { w: 60, h: 40, color: "#5cb85c" }, // wide
    { w: 50, h: 60, color: "#f0ad4e" }  // medium
];

let obstacle = createObstacle();

function createObstacle() {
    const type = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
    return {
        x: canvas.width + 100,
        y: GROUND_Y + (player.h - type.h),
        w: type.w,
        h: type.h,
        color: type.color
    };
}

// Input
document.addEventListener("keydown", e => {
    if (e.code === "Space") {
        if (!gameOver && player.onGround) {
            player.vy = JUMP_FORCE;
            player.onGround = false;
        } else if (gameOver) {
            resetGame();
        }
    }
});

function resetGame() {
    gameOver = false;
    score = 0;
    player.y = GROUND_Y;
    player.vy = 0;
    player.onGround = true;
    obstacle = createObstacle();
}

// Update
function update() {
    if (gameOver) return;

    // Player physics
    player.vy += GRAVITY;
    player.y += player.vy;

    if (player.y >= GROUND_Y) {
        player.y = GROUND_Y;
        player.vy = 0;
        player.onGround = true;
    }

    // Obstacle movement
    obstacle.x -= SPEED;

    // Respawn obstacle once passed
    if (obstacle.x + obstacle.w < player.x - 50) {
        score++;
        obstacle = createObstacle();
    }

    // Collision detection
    if (
        player.x < obstacle.x + obstacle.w &&
        player.x + player.w > obstacle.x &&
        player.y < obstacle.y + obstacle.h &&
        player.y + player.h > obstacle.y
    ) {
        gameOver = true;
    }
}

// Draw
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Ground
    ctx.fillStyle = "#444";
    ctx.fillRect(0, GROUND_Y + player.h, canvas.width, 40);

    // Player
    ctx.fillStyle = "#ffcc00";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // Obstacle
    ctx.fillStyle = obstacle.color;
    ctx.fillRect(obstacle.x, obstacle.y, obstacle.w, obstacle.h);

    // UI
    ctx.fillStyle = "#000";
    ctx.font = "18px Arial";
    ctx.fillText("Score: " + score, 10, 25);

    if (gameOver) {
        ctx.font = "32px Arial";
        ctx.fillText("Game Over", 310, 130);
        ctx.font = "18px Arial";
        ctx.fillText("Press Space to Restart", 290, 165);
    }
}

// Loop
function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
